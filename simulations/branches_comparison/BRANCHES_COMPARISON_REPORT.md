# 分岐数比較シミュレーション結果レポート

## 実験条件

### 比較対象
1. **分岐数2**: 1人の上長に対して2人の部下
2. **分岐数5**: 1人の上長に対して5人の部下
3. **分岐数10**: 1人の上長に対して10人の部下

### シミュレーション設定
- **試行回数**: 各条件1,000回
- **エージェント数**: 各シミュレーション100体
- **移動ルール**: 階層依存ルール（上位20%, 同階層30%, 下位50%）
- **移動回数分布**: 10回(55%), 20回(30%), 40回(10%), 80回(5%)

### 注意事項
- 分岐数10は計算量の制約により、階層数を4階層に調整
- 分岐数2, 5は7階層で実施

---

## 実験結果

### 結果1: 分岐数2（7階層）

**組織規模**: ノード数127, エッジ数126

| 役職 | 階層深さ | 平均訪問回数 | 標準偏差 |
|------|---------|-------------|---------|
| CEO | 0 | 2.52 | 0.00 |
| CTO | 1 | 4.26 | 0.03 |
| Director | 2 | 5.83 | 0.09 |
| Manager | 3 | 8.75 | 0.14 |
| TeamLead | 4 | 15.37 | 0.20 |
| **Senior** | **5** | **28.95** | **0.54** |
| Junior | 6 | 11.98 | 0.26 |

**最大負荷**: Senior（depth=5）に28.95回

---

### 結果2: 分岐数5（7階層）

**組織規模**: ノード数19,531, エッジ数19,530

| 役職 | 階層深さ | 平均訪問回数 | 標準偏差 |
|------|---------|-------------|---------|
| **CEO** | **0** | **0.52** | **0.00** |
| CTO | 1 | 0.56 | 0.02 |
| Director | 2 | 0.49 | 0.03 |
| Manager | 3 | 0.41 | 0.03 |
| TeamLead | 4 | 0.36 | 0.03 |
| Senior | 5 | 0.30 | 0.05 |
| Junior | 6 | 0.05 | 0.01 |

**最大負荷**: CEO（depth=0）に0.52回

**特記**: 組織規模が大きすぎて負荷が極度に分散

---

### 結果3: 分岐数10（4階層）

**組織規模**: ノード数1,111, エッジ数1,110

| 役職 | 階層深さ | 平均訪問回数 | 標準偏差 |
|------|---------|-------------|---------|
| **CEO** | **0** | **42.09** | **0.00** |
| CTO | 1 | 23.03 | 0.27 |
| Director | 2 | 9.45 | 0.27 |
| Manager | 3 | 0.84 | 0.04 |

**最大負荷**: CEO（depth=0）に42.09回

**特記**: 分岐数増加により、負荷ピークが最上層に移動

---

## 考察

### 1. 分岐数と負荷分布の関係

#### 負荷ピーク位置の変化

| 分岐数 | 階層数 | ノード数 | 最大負荷位置 | 最大負荷値 | ピーク深さ |
|-------|--------|---------|-------------|-----------|-----------|
| 2 | 7 | 127 | Senior | 28.95 | depth=5 (総層-2) |
| 5 | 7 | 19,531 | CEO | 0.52 | depth=0 (ルート) |
| 10 | 4 | 1,111 | CEO | 42.09 | depth=0 (ルート) |

#### 重要な発見

**発見1: 分岐数増加により負荷ピークが上層へ移動**
- 分岐数2: depth=5（下層の中間管理職）
- 分岐数5,10: depth=0（CEO）

**発見2: 組織規模と負荷の逆相関**
- 分岐数5（19,531ノード）: 最大負荷0.52回（極小）
- 分岐数2（127ノード）: 最大負荷28.95回
- 分岐数10（1,111ノード）: 最大負荷42.09回

### 2. 分岐数による負荷パターンの違い

#### パターンA: 分岐数2（少ない部下数）
```
負荷分布: 下層中間管理職に集中
CEO:      2.52   █
CTO:      4.26   ██
Director: 5.83   ███
Manager:  8.75   ████
TeamLead: 15.37  ████████
Senior:   28.95  ███████████████ ← 最大
Junior:   11.98  ██████
```

**特徴**:
- 下位からの情報集約点（depth=5）に負荷集中
- 階層が深くなるほど負荷増加（Juniorを除く）
- 「総階層数-2」の法則が成立

#### パターンB: 分岐数5（中程度の部下数）
```
負荷分布: 極度に分散（全体的に低負荷）
CEO:      0.52  ██
CTO:      0.56  ██
Director: 0.49  ██
Manager:  0.41  ██
TeamLead: 0.36  █
Senior:   0.30  █
Junior:   0.05  ▌
```

**特徴**:
- 組織規模が巨大（19,531ノード）
- 個別ノードの負荷は極めて低い
- CEOがわずかに高いが、ほぼ均等分散

#### パターンC: 分岐数10（多い部下数）
```
負荷分布: 上層に集中
CEO:      42.09  ████████████████████████████ ← 最大
CTO:      23.03  ███████████████
Director:  9.45  ██████
Manager:   0.84  ▌
```

**特徴**:
- CEOに最大負荷集中
- 階層が深くなるほど負荷減少（分岐数2と逆パターン）
- 上位層への集中型負荷分布

### 3. 理論的解釈

#### メカニズムの説明

**分岐数2の場合（下層集中型）**:
- 末端ノード数が少ない（64個）
- 下位からの情報を特定の中間管理職が集約
- ボトルネック: 情報集約点（Senior層）

**分岐数10の場合（上層集中型）**:
- 末端ノード数が多い（1000個）
- 多数の下位ノードが存在するため、ランダム移動でも下層での滞在時間が長い
- 上層への到達確率は低いが、一度到達すると選択肢が少ないため滞在
- ボトルネック: 組織全体を統括するCEO

#### 数理的考察

分岐数 $b$、階層数 $h$ のとき、depth $d$ のノード数は：

$$N(d) = b^d$$

総ノード数は：

$$N_{\text{total}} = \sum_{d=0}^{h-1} b^d = \frac{b^h - 1}{b - 1}$$

**訪問確率の近似**:
- 下位移動確率が高い（50%）ため、深い階層のノード総数が多いと、そこに長く滞在
- 上位移動確率が低い（20%）ため、一度上層に到達すると、選択肢が少なく集中

### 4. 実務的示唆

#### 組織設計への含意

**示唆1: 少人数チーム（分岐数2）の問題点**
- 中間管理職（特に下層）に負荷が集中
- 情報集約による構造的ボトルネック
- 対策: 中間管理職の複数配置、情報フロー経路の多様化

**示唆2: 大人数チーム（分岐数10）の問題点**
- 経営層（CEO）への負荷集中
- 直接管理する部下が多すぎることによる負荷
- 対策: 階層を増やして分散、権限委譲

**示唆3: 中程度チーム（分岐数5）の特徴**
- 組織が巨大化すると負荷が極度に分散
- 個別ノードの負荷は低いが、組織全体の複雑性が増大
- トレードオフ: 個人負荷 vs 組織複雑性

#### 最適な分岐数の考察

現実的な組織サイズ（100-1000人規模）を考慮すると：
- **分岐数3-5程度が適切**と推測される
- 負荷集中と組織複雑性のバランス
- 階層数との組み合わせで調整

### 5. 研究の限界

- 分岐数5の7階層（19,531ノード）は現実的な組織規模を超える
- 分岐数10の7階層は計算不可能
- 階層数を揃えた比較が困難
- 移動ルールが固定（階層依存のみ）

---

## まとめ

1. **分岐数2**: 下層中間管理職（Senior, depth=5）に最大負荷28.95回
2. **分岐数5**: 極度に分散、CEO（depth=0）に最大負荷0.52回
3. **分岐数10**: 経営層（CEO, depth=0）に最大負荷42.09回

**核心的発見**:
- 分岐数が少ない → 下層中間管理職に負荷集中
- 分岐数が多い → 上層経営層に負荷集中
- 適切な分岐数の存在が示唆される

**今後の課題**:
- 同じ階層数での公平な比較
- 最適分岐数の特定
- 他の移動ルール（権限制約、負荷回避）での検証

---

**実験実施日**: 2025年8月23日
**総試行回数**: 3,000回（各条件1,000回 × 3条件）
**総エージェント数**: 300,000体