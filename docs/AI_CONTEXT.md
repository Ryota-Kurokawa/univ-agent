# Context for AI Assistants

## Research Focus
- Goal: optimize organizational networks to relieve middle-management bottlenecks using graph theory and agent-based modeling (ABM).
- Core question: can structural changes in a hierarchical network redistribute communication load away from middle layers without hurting information reach?
- Application: modern IT organizations that rely on layered reporting chains and diverse information types (strategic, technical, operational).

## Key Research Questions
1. What is the impact of deploying multiple managers with overlapping authority on visit-frequency dispersion?
2. How do extreme team sizes (2-3 vs. 8-10 members) change the burden profile while keeping hierarchy depth constant?
3. How badly does middle-management overload worsen when staff counts drop 30-50% but workload stays fixed?
4. How do movement rules (hierarchy-driven, authority-limited, load-avoidance) alter load concentration?

## Simulation & Model Overview
- Base topology: balanced tree generated by `OrganizationGraph` with configurable branching factor/height. Variants add loops, duplicate middle managers, shrink/expand teams, or randomly remove non-leaf nodes to model downsizing.
- Nodes carry role labels per depth (CEO → CTO → Director → Manager → TeamLead → Senior → Junior → Staff).
- Agents (`MovingAgent`) follow weighted random walks for a fixed number of moves drawn from {10, 20, 40, 80} with probabilities {0.55, 0.30, 0.10, 0.05}. Start nodes are sampled across the graph.
- Movement rules:
  - Hierarchy-dependent: prioritize downward flow for strategic info, same-level sharing for technical/operational tasks.
  - Authority-constrained: 70% downward, 20% lateral, 10% upward.
  - Load-avoidance: 60% preference toward nodes with low visit counts, otherwise normal movement.
- Trials: ≥1,000 per scenario to stabilize visit distributions.

## Scenarios Encoded
- Baseline hierarchy (balanced tree).
- Baseline plus bottom-layer loop edges (tests redundancy).
- Dual middle management (virtual duplicates sharing child nodes).
- Small-team (branching=2) and large-team (branching=8) organizations.
- Downsizing cases removing 30% or 50% of internal nodes while workload remains constant.
- Experiments directory captures additional scenario scripts; new studies should follow the same README + script structure.

## Load Metrics & Evaluation
- Visit-based load: `Load(v_i) = Σ_t Visit(v_i, t)` tracked via `OrganizationGraph.visit_count`.
- Middle-management load concentration: `C_middle = Σ_{i∈Middle} Load(v_i) / Σ_i Load(v_i)`.
- Dispersion: standard deviation of node loads, σ_load.
- Efficiency concept: organizational outputs divided by max node load (placeholder for future comparative studies).
- Planned multi-dimensional metrics (future work): information, cognitive, decision, temporal loads, plus stress and bottleneck scores aggregated with tunable weights.
- Analysis goals: correlate centrality scores (betweenness, closeness, degree, eigenvector) with observed load; identify conditions where structural tweaks reduce bottlenecks.

## Implementation Highlights
- `research_simulation.py` orchestrates graph generation, agent movement, and PNG exports; relies on NetworkX, matplotlib, optional Graphviz/pydot for hierarchical layout.
- Visualization outputs include initial-state trees and step snapshots for QA.
- Random seeds should be fixed in scenario scripts to ensure reproducibility.
- Virtual environments (`python -m venv .venv`, install requirements) are standard; add new deps to `requirements.txt`.

## Research Roadmap
1. Phase 1 (1-2 months): implement full movement rules, baseline experiments, and visit/load tracking.
2. Phase 2 (2-3 months): evaluate multi-manager, team-size, downsizing scenarios.
3. Phase 3 (1-2 months): statistical analysis, optimization algorithm prototypes balancing centrality vs. load.
4. Phase 4 (1-2 months): documentation, paper writing, practical deployment guidance.

## Expected Outcomes
- Quantified benefits of redundant middle managers and team-size adjustments.
- Guidelines for restructuring without increasing bottlenecks under resource cuts.
- Framework for monitoring load in real time and informing organizational design decisions with ABM evidence.

---

## 日本語訳

### AI支援向けコンテキスト

#### 研究フォーカス
- 目的: グラフ理論とエージェントベースモデリング(ABM)を用いて組織ネットワークを最適化し、中間管理職層のボトルネックを解消する。
- 中心的な問い: 階層型ネットワークの構造を変えることで、情報到達性を損なわずに中間層から通信負荷を逃がせるか。
- 想定対象: 階層的なレポートラインと多様な情報種別(戦略/技術/業務)を持つ現代的なIT組織。

#### 主要研究質問
1. 権限が重複する中間管理職を複数配置すると、訪問頻度の分散にどの程度効果があるか。
2. チーム人数を極端に小さく(2-3名)または大きく(8-10名)した場合、階層の深さを保ったまま負荷プロファイルはどう変化するか。
3. 人員を30-50%削減しても業務量が変わらない場合、中間管理職の過負荷はどこまで悪化するか。
4. 移動ルール(階層依存・権限制約・負荷回避)によって負荷集中はどのように変わるか。

#### シミュレーションとモデル概要
- 基本トポロジ: `OrganizationGraph` が生成する平衡木。枝分かれと高さを変更可能で、ループ追加・中間管理職の複製・チーム規模の拡大/縮小・非葉ノードのランダム削除(ダウンサイジング)などの派生がある。
- ノードには階層に応じた役割ラベル(CEO→CTO→Director→Manager→TeamLead→Senior→Junior→Staff)を付与。
- エージェント(`MovingAgent`)は{10, 20, 40, 80}回の移動回数を{0.55, 0.30, 0.10, 0.05}で抽選し、重み付きランダムウォークで移動。開始ノードは全体からサンプリング。
- 移動ルール:
  - 階層依存: 戦略情報は下位、技術/業務情報は同階層を優先。
  - 権限制約: 下位70%、同階層20%、上位10%。
  - 負荷回避: 訪問回数が少ないノードを60%の確率で優先、それ以外は通常移動。
- 各シナリオにつき少なくとも1,000トライアルを実施し訪問分布を安定化。

#### 実装済みシナリオ
- ベースラインの階層構造(平衡木)。
- 最下層にループを追加したベースライン(冗長性評価)。
- 中間管理職の二重配置(子ノードを共有する仮想複製)。
- 小規模チーム(branching=2)と大規模チーム(branching=8)。
- 内部ノードの30%/50%を除去するダウンサイジング(業務量は一定)。
- `experiments/` ディレクトリに追加シナリオスクリプトを配置。追加時はREADMEとスクリプトのペア構成を踏襲。

#### 負荷指標と評価
- 訪問回数ベースの負荷: `Load(v_i) = Σ_t Visit(v_i, t)` を `OrganizationGraph.visit_count` で記録。
- 中間管理職負荷集中度: `C_middle = Σ_{i∈Middle} Load(v_i) / Σ_i Load(v_i)`。
- 分散指標: ノード負荷の標準偏差 σ_load。
- 効率概念: 最大負荷ノードで割った組織成果(今後の比較用プレースホルダ)。
- 今後の多次元指標(予定): 情報/認知/意思決定/時間負荷とストレス・ボトルネック指標を可変重みで集計。
- 解析目標: 中心性(媒介・近接・次数・固有ベクトル)と負荷の相関を確認し、構造調整でボトルネックを緩和できる条件を特定。

#### 実装ポイント
- `research_simulation.py` がグラフ生成・エージェント移動・PNG出力を統括。NetworkXとmatplotlibを利用し、階層レイアウトにはGraphviz/pydot(任意)を使用。
- 可視化出力は初期状態の木構造とステップごとのスナップショットを含み、品質確認に利用可能。
- 再現性確保のため、シナリオスクリプトでは乱数シードを固定する。
- 仮想環境(`python -m venv .venv`)と依存パッケージの管理を標準化し、新しい依存は `requirements.txt` に追記。

#### 研究ロードマップ
1. フェーズ1(1-2ヶ月): 移動ルールの実装、ベースライン実験、訪問/負荷トラッキング。
2. フェーズ2(2-3ヶ月): 複数管理職・チームサイズ・ダウンサイジング各シナリオの評価。
3. フェーズ3(1-2ヶ月): 統計分析と中心性vs負荷を両立させる最適化アルゴリズムの試作。
4. フェーズ4(1-2ヶ月): ドキュメント整備、論文執筆、実運用に向けたガイド作成。

#### 期待成果
- 冗長な中間管理職配置やチームサイズ調整による定量的効果の提示。
- リソース制約下でボトルネックを悪化させない再編ガイドラインの策定。
- リアルタイム負荷監視とABM証拠に基づく組織設計判断のためのフレームワーク提供。
